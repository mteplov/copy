global
    log /dev/log local0
    maxconn 2000
    daemon

defaults
    log     global
    mode    http
    option  tcplog
    timeout connect 5000ms
    timeout client  50000ms
    timeout server  50000ms

frontend fe_http
    bind *:9000
    acl host_example hdr(host) -i example.local
    use_backend be_example if host_example
    default_backend be_default

backend be_example
    balance roundrobin
    server srv1 127.0.0.1:7777 weight 2 check
    server srv2 127.0.0.1:8888 weight 3 check
    server srv3 127.0.0.1:9999 weight 4 check

backend be_default
    balance roundrobin
    server srv_def1 127.0.0.1:7777 check
    server srv_def2 127.0.0.1:8888 check
    server srv_def3 127.0.0.1:9999 check

listen stats
    bind *:9001
    stats enable
    stats uri /stats
    stats refresh 10s
    stats auth admin:admin
